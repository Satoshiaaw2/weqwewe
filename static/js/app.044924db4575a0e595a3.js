webpackJsonp([4],{0:function(e,t){},1:function(e,t){},2:function(e,t){},3:function(e,t){},"JJ/s":function(e,t,n){var i={"./connect-modal.entry.js":["nn58",0]};function r(e){var t=i[e];return t?n.e(t[1]).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}r.keys=function(){return Object.keys(i)},r.id="JJ/s",e.exports=r},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("lRwf"),r=n.n(i),a=n("c5JI"),s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"mainpage"}},[n("div",{attrs:{id:"header"}},[n("div",{attrs:{id:"topright"}},[e.bSignedIn?e._e():n("el-button",{attrs:{type:"primary",round:""},on:{click:e.loginIn}},[e._v("Sign in")]),e._v(" "),e.bSignedIn?n("el-button",{attrs:{type:"info",round:""},on:{click:e.loginOut}},[e._v("Sign out")]):e._e()],1)]),e._v(" "),n("div",{attrs:{id:"main"}},[n("div",[n("el-label",{staticClass:"descLabel"},[e._v("Address: ")]),e._v(" "),n("el-label",[e._v(e._s(e.selfAddress.length>0?e.selfAddress:"None"))])],1),e._v(" "),n("div",[n("el-label",{staticClass:"descLabel"},[e._v("Name: ")]),e._v(" "),n("el-label",[e._v(e._s(e.mylogicName.length>0?e.mylogicName+"."+e.myLogicNamespace:"None"))])],1),e._v(" "),n("fieldset",{staticClass:"seg"},[n("legend",[e._v("Self transfer to EOA")]),e._v(" "),n("el-input",{staticClass:"input-with-select",staticStyle:{width:"40%","margin-bottom":"16px"},attrs:{placeholder:"principal address",maxlength:"200",size:"large",clearable:"true"},model:{value:e.inPrincipleAddr,callback:function(t){e.inPrincipleAddr=t},expression:"inPrincipleAddr"}}),e._v(" "),n("el-input",{staticClass:"input-with-select",staticStyle:{width:"30%","margin-bottom":"16px"},attrs:{placeholder:"stacks.btc",maxlength:"150",size:"large",clearable:"true"},model:{value:e.inTransferName,callback:function(t){e.inTransferName=t},expression:"inTransferName"}}),e._v(" "),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{primary:""},on:{click:function(t){return e.onClickTransfer(e.inPrincipleAddr)}}},[e._v("Transfer")])],1),e._v(" "),n("fieldset",{staticClass:"seg"},[n("legend",[e._v("Self transfer to contract")]),e._v(" "),n("el-input",{staticClass:"input-with-select",staticStyle:{width:"40%","margin-bottom":"16px"},attrs:{placeholder:"contract full address",maxlength:"200",size:"large",clearable:"true"},model:{value:e.inContractAddr,callback:function(t){e.inContractAddr=t},expression:"inContractAddr"}}),e._v(" "),n("el-input",{staticClass:"input-with-select",staticStyle:{width:"30%","margin-bottom":"16px"},attrs:{placeholder:"stacks.btc",maxlength:"150",size:"large",clearable:"true"},model:{value:e.inTransferName,callback:function(t){e.inTransferName=t},expression:"inTransferName"}}),e._v(" "),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{primary:""},on:{click:function(t){return e.onClickTransfer(e.inContractAddr)}}},[e._v("Transfer")])],1),e._v(" "),n("fieldset",{staticClass:"seg"},[n("legend",[e._v("New vote")]),e._v(" "),n("el-input",{staticClass:"input-with-select",staticStyle:{width:"40%","margin-bottom":"16px"},attrs:{placeholder:"contract full address",maxlength:"200",size:"large",clearable:"true"},model:{value:e.inContractAddr,callback:function(t){e.inContractAddr=t},expression:"inContractAddr"}}),e._v(" "),n("el-input",{staticClass:"input-with-select",staticStyle:{width:"30%","margin-bottom":"16px"},attrs:{placeholder:"transfer to whom",maxlength:"150",size:"large",clearable:"true"},model:{value:e.inTransferToWhom,callback:function(t){e.inTransferToWhom=t},expression:"inTransferToWhom"}}),e._v(" "),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{primary:""},on:{click:e.onClickNewVote}},[e._v("New Vote")])],1),e._v(" "),n("fieldset",{staticClass:"seg"},[n("legend",[e._v("Vote yes(first verify the log in New-vote transaction!!!)")]),e._v(" "),n("el-input",{staticClass:"input-with-select",staticStyle:{width:"40%","margin-bottom":"16px"},attrs:{placeholder:"contract full address",maxlength:"200",size:"large",clearable:"true"},model:{value:e.inContractAddr,callback:function(t){e.inContractAddr=t},expression:"inContractAddr"}}),e._v(" "),n("el-input",{staticClass:"input-with-select",staticStyle:{width:"30%","margin-bottom":"16px"},attrs:{placeholder:"act_id",maxlength:"150",size:"large",clearable:"true"},model:{value:e.inVoteYesActId,callback:function(t){e.inVoteYesActId=t},expression:"inVoteYesActId"}}),e._v(" "),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{primary:""},on:{click:e.onClickVoteYes}},[e._v("Vote yes")])],1),e._v(" "),n("fieldset",{staticClass:"seg"},[n("legend",[e._v("Contract renew")]),e._v(" "),n("div",[n("el-input",{staticClass:"input-with-select",staticStyle:{width:"40%","margin-bottom":"16px"},attrs:{placeholder:"contract solo address(only prefix)",maxlength:"200",size:"large",clearable:"true"},model:{value:e.inContractSoloAddr,callback:function(t){e.inContractSoloAddr=t},expression:"inContractSoloAddr"}})],1),e._v(" "),n("el-input",{staticClass:"input-with-select",staticStyle:{width:"35%","margin-bottom":"16px"},attrs:{placeholder:"cname1,cname2,cname3...(1/5/10)",maxlength:"150",size:"large",clearable:"true"},model:{value:e.inRenewNames,callback:function(t){e.inRenewNames=t},expression:"inRenewNames"}}),e._v(" "),n("el-input",{staticClass:"input-with-select",staticStyle:{width:"20%","margin-bottom":"16px"},attrs:{placeholder:"real cost price(0 when bug)",maxlength:"200",size:"large",clearable:"true"},model:{value:e.inNamePrice,callback:function(t){e.inNamePrice=t},expression:"inNamePrice"}}),e._v(" "),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{primary:""},on:{click:e.onClickRenew}},[e._v("Renew")])],1),e._v(" "),n("fieldset",{staticClass:"seg"},[n("legend",[e._v("Direct renew")]),e._v(" "),n("div",{staticStyle:{"margin-top":"12px"}}),e._v(" "),n("el-input",{staticClass:"input-with-select",staticStyle:{width:"15%","margin-bottom":"16px"},attrs:{placeholder:"renew price(BNS)",maxlength:"150",size:"large",clearable:"true"},model:{value:e.inDirectPrice,callback:function(t){e.inDirectPrice=t},expression:"inDirectPrice"}}),e._v(" "),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{primary:""},on:{click:e.onClickDirectRenew}},[e._v("DirectRenew")])],1),e._v(" "),n("div")])])},staticRenderFns:[]};var c=function(e){n("q9nM")},o=n("VU/8")(a.a,s,!1,c,"data-v-3f97b8a9",null).exports;r.a.config.productionTip=!1,new r.a({el:"#app",components:{MainPage:o},template:"<MainPage/>"})},c5JI:function(e,t,n){"use strict";(function(e){var i=n("d7EF"),r=n.n(i),a=n("Xxa5"),s=n.n(a),c=n("exGp"),o=n.n(c),l=n("v1w/"),d=n("PfU1"),u=n("DHPL"),f=n("geuY"),m=(n.n(f),n("lRwf")),p=(n.n(m),Object(l.c)());t.a={name:"MainPage",data:function(){return{bHasInit:!1,bSignedIn:l.d.isUserSignedIn(),selfAddress:l.d.isUserSignedIn()?Object(l.b)():"",inPrincipleAddr:"",inContractAddr:"",inTransferName:"",inTransferToWhom:"",inVoteYesActId:"",inNoNeed:"",myLogicNamespace:"",mylogicName:"",pendingTip:"pending...",BNSAddr:"SP000000000000000000002Q6VF78",BNSName:"bns",inContractSoloAddr:"",inNamePrice:"",inRenewNames:"",inDirectPrice:""}},watch:{},mounted:function(){var e=this;return o()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:l.d.isUserSignedIn()&&e.reqResolvePrincipal();case 1:case"end":return t.stop()}},t,e)}))()},methods:{loginIn:function(e){if("function"==typeof e){this.$confirm("Please sign in first.","Tips",{confirmButtonText:"Sign in",cancelButtonText:"No",type:"info",center:!0}).then(function(){Object(l.a)()}).catch(function(){e()})}else Object(l.a)()},loginOut:function(){l.d.signUserOut(),window.location.reload()},verifyContract:function(){var e=this.inContractAddr.split("."),t=r()(e,2),n=t[0],i=t[1];return n&&(n=n.trim()),i&&(i=i.trim()),n&&0!=n.length&&i&&0!=i.length?[n,i]:(alert("contract addr invalid"),[!1,!1])},onClickTransfer:function(e){var t=null;if(-1!=(e=e.trim()).indexOf(".")){var n=this.verifyContract(),i=r()(n,2),a=i[0],s=i[1];if(!a)return;t=Object(d.d)(a,s)}else t=Object(d.l)(e);var c=this.inTransferName.trim().toLowerCase().split("."),o=r()(c,2),l=o[0],f=o[1];if(l&&(l=l.trim()),f&&(f=f.trim()),l&&0!=l.length&&f&&0!=f.length){var m=[Object(d.b)(f),Object(d.b)(l),t,Object(d.i)()],g=this,h={contractAddress:this.BNSAddr,contractName:this.BNSName,functionName:"name-transfer",functionArgs:m,postConditionMode:1,network:p,senderAddress:this.selfAddress,onFinish:function(e){g.$notify({title:"transfer sent",message:g.pendingTip})}};Object(u.c)(h)}else alert("BNS name invalid")},onClickNewVote:function(){var e=this.verifyContract(),t=r()(e,2),n=t[0],i=t[1];if(n){var a=this.inTransferToWhom.trim();if(0!=a.length){var s=this,c={contractAddress:n,contractName:i,functionName:"new_vote",functionArgs:[Object(d.l)(a)],postConditionMode:1,network:p,senderAddress:this.selfAddress,onFinish:function(e){s.$notify({title:"new vote",message:s.pendingTip})}};Object(u.c)(c)}else alert("to whom invalid")}},onClickVoteYes:function(){var e=this.verifyContract(),t=r()(e,2),n=t[0],i=t[1];if(n){var a=this.inVoteYesActId.trim();if(0!=a.length){var s=this,c={contractAddress:n,contractName:i,functionName:"vote_yes",functionArgs:[Object(d.n)(parseInt(a))],postConditionMode:1,network:p,senderAddress:this.selfAddress,onFinish:function(e){s.$notify({title:"vote yes",message:s.pendingTip})}};Object(u.c)(c)}else alert("to whom invalid")}},onClickRenew:function(){var e=this;return o()(s.a.mark(function t(){var n,i,r,a,c,o,l,f;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e.inRenewNames.trim().split(","),i=0;case 2:if(!(i<n.length)){t.next=10;break}if(n[i]=n[i].trim(),0!=n[i].length){t.next=7;break}return alert("error"),t.abrupt("return");case 7:i++,t.next=2;break;case 10:if(r="",1!=n.length){t.next=15;break}r="renew_one",t.next=25;break;case 15:if(5!=n.length){t.next=19;break}r="renew_five",t.next=25;break;case 19:if(10!=n.length){t.next=23;break}r="renew_ten",t.next=25;break;case 23:return alert("must be 1 or 5 or 10 names"),t.abrupt("return");case 25:for(a=[],c=e.inNamePrice.trim(),a=0==c.length||0==parseInt(c)?[Object(d.n)(2e6),Object(d.g)()]:[Object(d.n)(parseInt(c)),Object(d.m)()],o=0;o<n.length;o++)a.push(Object(d.d)(e.inContractSoloAddr,n[o]));l=e,f={contractAddress:"SP2GYJ0NV8AQM47831HM54KNHRX74DJ5ABYQSC3D3",contractName:"renew",functionName:r,functionArgs:a,postConditionMode:1,network:p,senderAddress:e.selfAddress,onFinish:function(e){l.$notify({title:"renew "+n.length,message:l.pendingTip})}},Object(u.c)(f);case 32:case"end":return t.stop()}},t,e)}))()},onClickDirectRenew:function(){var e=this.mylogicName,t=this.myLogicNamespace;if(e.length<=0||t.length<=0)alert("no name");else{var n=this.inDirectPrice.trim();if(0!=n.length){var i=[Object(d.b)(t),Object(d.b)(e),Object(d.n)(parseInt(n)),Object(d.i)(),Object(d.i)()],r=this,a={contractAddress:this.BNSAddr,contractName:this.BNSName,functionName:"name-renewal",functionArgs:i,postConditionMode:1,network:p,senderAddress:this.selfAddress,onFinish:function(e){r.$notify({title:"direct renew "+r.inDirectName,message:r.pendingTip})}};Object(u.c)(a)}else alert("price invalid")}},reqResolvePrincipal:function(){var e=this;return o()(s.a.mark(function t(){var n,i,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.selfAddress.length<=0)){t.next=2;break}return t.abrupt("return");case 2:return n={contractAddress:e.BNSAddr,contractName:e.BNSName,functionName:"resolve-principal",functionArgs:[Object(d.l)(e.selfAddress)],network:p,senderAddress:e.selfAddress},t.next=5,Object(d.c)(n);case 5:i=t.sent,(r=Object(d.e)(i)).type.includes("code")?(e.mylogicName="",e.myLogicNamespace=""):(e.myLogicNamespace=e.buffer2Str(r.value.namespace),e.mylogicName=e.buffer2Str(r.value.name));case 8:case"end":return t.stop()}},t,e)}))()},testWithdraw:function(){},buffer2Str:function(t){return e.from(t.value.substring(2),"hex").toString()},test:function(){var e=this;return o()(s.a.mark(function t(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t,e)}))()}}}}).call(t,n("EuP9").Buffer)},lRwf:function(e,t){e.exports=Vue},q9nM:function(e,t){},"v1w/":function(e,t,n){"use strict";n.d(t,"d",function(){return s}),t.a=function(){Object(i.d)({appDetails:{name:"-",icon:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/Image_created_with_a_mobile_phone.png/440px-Image_created_with_a_mobile_phone.png"},redirectTo:"/",onFinish:function(){window.location.reload()},userSession:s})},t.c=function(){return o},t.b=function(){return c().profile.stxAddress.mainnet};var i=n("DHPL"),r=(n("hR57"),n("xm7s")),a=new i.a(["store_write","publish_data"]),s=new i.b({appConfig:a});function c(){return s.loadUserData()}var o=new r.a}},["NHnr"]);